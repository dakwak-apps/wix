<!DOCTYPE HTML>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Dakwak Settings Endpoint</title>

    <link href="css/bootstrap.min.css" media="screen" rel="stylesheet" type="text/css" />

    <script type="text/javascript" src="//sslstatic.wix.com/services/js-sdk/1.16.0/js/Wix.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js" type="text/javascript"></script>
    <script src="js/bootstrap.min.js" type="text/javascript"></script>

    <script type="text/javascript">
        $(document).ready(function(){

            Wix.getSiteInfo( function(siteInfo) {
                if(siteInfo.baseUrl != '') {
                    $('#url').val(siteInfo.baseUrl);
                    $('#from_lang').val(Wix.Utils.getLocale());

                    $.ajax({
                        url: 'https://f3.f.us.dakwak.com/api/users/is_wix.json',
                        type: 'POST',
                        dataType: 'json',
                        data: {uid: Wix.Utils.getUid(), url: siteInfo.baseUrl},
                        success: function(data) {
                            alert(data);
                        },

                        error: function (xhr, ajaxOptions, thrownError) {
                            alert(xhr);
                        }
                    });


                } else {
                    alert('Your Wix website needs to be published, so it can have a valid URL. Please set your URL then enable Dakwak.');
                }
            });

            $('#settings-form').submit(function() {

                var uid = Wix.Utils.getUid();
                var email =  $('#email').val();
                var url = $('#url').val();
                var from_lang = $('#from_lang').val();
                var to_lang = $('#tolang').val();

                $.ajax({
                    url: 'https://dakwak.com/api/users/new.json',
                    type: 'POST',
                    dataType: 'json',
                    data: {uid: uid, email: email, url: url, from_lang: from_lang, to_lang: to_lang},
                    success: function(data) {

                    },

                    error: function (xhr, ajaxOptions, thrownError) {

                    }
                });
            });
        });

    </script>
</head>
<body>
<img src="images/logo.png" class="img-thumbnail" style="margin: 5px"/>
<h4>Dakwak Settings</h4>
<form id="settings-form" action="" >

    <div class="form-group">
        <label>E-mail:</label>
        <input class="form-control" id="email" type="text" name="email" />
    </div>
    <div class="form-group">
        <label>Website URL:</label>
        <input class="form-control" id="url" type="text" name="url" />
    </div>
    <div class="form-group">
        <label>Original language:</label>
        <select class="form-control" id="from_lang" name="from_lang">
            <option value="af">Afrikaans</option><option value="el">Greek</option><option value="ro">Romanian</option><option value="sq">Albanian</option><option value="iw">Hebrew</option><option value="ru">Russian</option><option value="ar">Arabic</option><option value="hi">Hindi</option><option value="sr">Serbian</option><option value="be">Belarusian</option><option value="hu">Hungarian</option><option value="sk">Slovak</option><option value="bg">Bulgarian</option><option value="is">Icelandic</option><option value="sl">Slovenian</option><option value="ca">Catalan</option><option value="id">Indonesian</option><option value="es">Spanish</option><option value="zh-CN">Chinese (Simplified)</option><option value="ga">Irish</option><option value="sw">Swahili</option><option value="hr">Croatian</option><option value="it">Italian</option><option value="sv">Swedish</option><option value="cs">Czech</option><option value="ja">Japanese</option><option value="th">Thai</option><option value="da">Danish</option><option value="ko">Korean</option><option value="tr">Turkish</option><option value="nl">Dutch</option><option value="lv">Latvian</option><option value="uk">Ukrainian</option><option value="en">English</option><option value="lt">Lithuanian</option><option value="vi">Vietnamese</option><option value="et">Estonian</option><option value="mk">Macedonian</option><option value="cy">Welsh</option><option value="tl">Filipino</option><option value="ms">Malay</option><option value="yi">Yiddish</option><option value="fi">Finnish</option><option value="mt">Maltese</option><option value="ur">Urdu</option><option value="fr">French</option><option value="fa">Persian</option><option value="zh-TW">Chinese (Traditional)</option><option value="gl">Galician</option><option value="pl">Polish</option><option value="fr-CA">French (Canada)</option><option value="de">German</option><option value="pt-PT">Portuguese (Europe)</option><option value="es-LA">Spanish (Latin America)</option><option value="pt-BR">Portuguese (Brazil)</option>
        </select>
    </div>
    <div class="form-group">
        <label>Target language:</label>
        <select class="form-control"  id="to_lang" name="to_lang">
            <option value=""> - None -</option>
            <option value="af">Afrikaans</option><option value="el">Greek</option><option value="ro">Romanian</option><option value="sq">Albanian</option><option value="iw">Hebrew</option><option value="ru">Russian</option><option value="ar">Arabic</option><option value="hi">Hindi</option><option value="sr">Serbian</option><option value="be">Belarusian</option><option value="hu">Hungarian</option><option value="sk">Slovak</option><option value="bg">Bulgarian</option><option value="is">Icelandic</option><option value="sl">Slovenian</option><option value="ca">Catalan</option><option value="id">Indonesian</option><option value="es">Spanish</option><option value="zh-CN">Chinese (Simplified)</option><option value="ga">Irish</option><option value="sw">Swahili</option><option value="hr">Croatian</option><option value="it">Italian</option><option value="sv">Swedish</option><option value="cs">Czech</option><option value="ja">Japanese</option><option value="th">Thai</option><option value="da">Danish</option><option value="ko">Korean</option><option value="tr">Turkish</option><option value="nl">Dutch</option><option value="lv">Latvian</option><option value="uk">Ukrainian</option><option value="en">English</option><option value="lt">Lithuanian</option><option value="vi">Vietnamese</option><option value="et">Estonian</option><option value="mk">Macedonian</option><option value="cy">Welsh</option><option value="tl">Filipino</option><option value="ms">Malay</option><option value="yi">Yiddish</option><option value="fi">Finnish</option><option value="mt">Maltese</option><option value="ur">Urdu</option><option value="fr">French</option><option value="fa">Persian</option><option value="zh-TW">Chinese (Traditional)</option><option value="gl">Galician</option><option value="pl">Polish</option><option value="fr-CA">French (Canada)</option><option value="de">German</option><option value="pt-PT">Portuguese (Europe)</option><option value="es-LA">Spanish (Latin America)</option><option value="pt-BR">Portuguese (Brazil)</option>
        </select>
    </div>
    <div class="form-group">
        <input type="submit" name="submit" value="Save settings" class="btn btn-default btn-success">
    </div>

</form>
</body>
</html>